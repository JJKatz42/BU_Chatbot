# pylint: disable=W0223

import os
import shutil
import multiprocessing
from scrapy.crawler import CrawlerProcess
from scrapy.utils.project import get_project_settings
from scrapy.spiders import CrawlSpider, Rule
from scrapy.linkextractors import LinkExtractor

# allowed_domains = ['www.berkeley.edu', 'aaads.berkeley.edu', 'aarc.berkeley.edu', 'aasd.berkeley.edu', 'academic-senate.berkeley.edu', 'access.berkeley.edu', 'accesscapital.berkeley.edu', 'accesscontent.berkeley.edu', 'ace.berkeley.edu', 'acelab.berkeley.edu', 'acs.berkeley.edu', 'acuc.berkeley.edu', 'adesnik.berkeley.edu', 'admissions.berkeley.edu', 'admit.berkeley.edu', 'advisingmatters.berkeley.edu', 'advocate.berkeley.edu', 'aeon.berkeley.edu', 'aero.berkeley.edu', 'afog.berkeley.edu', 'africa.berkeley.edu', 'africam.berkeley.edu', 'ahma.berkeley.edu', 'ai.berkeley.edu', 'ai-climate.berkeley.edu', 'aiaa.berkeley.edu', 'aiai.berkeley.edu', 'airforcerotc.berkeley.edu', 'ais.berkeley.edu', 'aleshire.berkeley.edu', 'altmeatlab.berkeley.edu', 'alumnichapters.berkeley.edu', 'ambassador.berkeley.edu', 'amenaced.berkeley.edu', 'americancultures.berkeley.edu', 'amgenscholars.berkeley.edu', 'amsa.berkeley.edu', 'analytics.berkeley.edu', 'angelo.berkeley.edu', 'anthofflab.berkeley.edu', 'anthropology.berkeley.edu', 'anti-ms-crew.berkeley.edu', 'antitrafficking.berkeley.edu', 'apapps.berkeley.edu', 'aphasia.berkeley.edu', 'apo.berkeley.edu', 'apply.berkeley.edu', 'aprecruit.berkeley.edu', 'apte.berkeley.edu', 'are.berkeley.edu', 'arebeta.berkeley.edu', 'arias.berkeley.edu', 'army.berkeley.edu', 'artofwriting.berkeley.edu', 'arts.berkeley.edu', 'artsdesign.berkeley.edu', 'artshumanities.berkeley.edu', 'artstudio.berkeley.edu', 'asc.berkeley.edu', 'asianstudies.berkeley.edu', 'ast.berkeley.edu', 'astep.berkeley.edu', 'astral.berkeley.edu', 'asucsteam.berkeley.edu', 'atc.berkeley.edu', 'atdp.berkeley.edu', 'atmosphere.berkeley.edu', 'audit.berkeley.edu', 'aurum.berkeley.edu', 'auth.Berkeley.EDU', 'auth-test.berkeley.edu', 'autolab.berkeley.edu', 'awards.berkeley.edu', 'awe.berkeley.edu', 'axs.berkeley.edu', 'babylab.berkeley.edu', 'backupchildcare.berkeley.edu', 'badgrads.berkeley.edu', 'badss.berkeley.edu', 'bailando.berkeley.edu', 'bair.berkeley.edu', 'bakarfellows.berkeley.edu', 'bakarlabs.berkeley.edu', 'bakerlab.berkeley.edu', 'balsaralab.berkeley.edu', 'bamlab.berkeley.edu', 'bamstudios.berkeley.edu', 'bancroft.berkeley.edu', 'bang.berkeley.edu', 'bankslab.berkeley.edu', 'basc.berkeley.edu', 'basicneeds.berkeley.edu', 'bawp.berkeley.edu', 'bayen.berkeley.edu', 'bbh.berkeley.edu', 'bcad.berkeley.edu', 'bcbp.berkeley.edu', 'bccn.berkeley.edu', 'bccp.berkeley.edu', 'bcdi.berkeley.edu', 'bcgc.berkeley.edu', 'bcle.berkeley.edu', 'bcommons.berkeley.edu', 'bconnected.berkeley.edu', 'bcourses.berkeley.edu', 'bcpf.berkeley.edu', 'bcsr.berkeley.edu', 'bcssa.berkeley.edu', 'bctp.berkeley.edu', 'bd.berkeley.edu', 'bds.berkeley.edu', 'bds-web.berkeley.edu', 'bdt.berkeley.edu', 'bea.berkeley.edu', 'beacon.berkeley.edu', 'beahrselp.berkeley.edu', 'beam.berkeley.edu', 'bearcenter.berkeley.edu', 'bearcorps.berkeley.edu', 'bearmun.berkeley.edu', 'bears.berkeley.edu', 'bearsregion.berkeley.edu', 'beartalk.berkeley.edu', 'begin.berkeley.edu', 'berc.berkeley.edu', 'berkeleycares.berkeley.edu', 'berkeleyconnect.berkeley.edu', 'berkeleyonline.berkeley.edu', 'berkeleyx.berkeley.edu', 'best.berkeley.edu', 'beyondacademia.berkeley.edu', 'bfip.berkeley.edu', 'bgb.berkeley.edu', 'biasbusters.berkeley.edu', 'bibserver.berkeley.edu', 'bic.berkeley.edu', 'bid.berkeley.edu', 'bidmap.berkeley.edu', 'bimi.berkeley.edu', 'bindery.berkeley.edu', 'bioegrad.berkeley.edu', 'bioeng.berkeley.edu', 'biology.berkeley.edu', 'biomaterials.berkeley.edu', 'biomechanics.berkeley.edu', 'biophysics.berkeley.edu', 'bioprinting.berkeley.edu', 'biosense.berkeley.edu', 'biotext.berkeley.edu', 'bisl.berkeley.edu', 'bisp.berkeley.edu', 'bjc.berkeley.edu', 'blac.berkeley.edu', 'bldata.berkeley.edu', 'blockchain.berkeley.edu', 'blsa.berkeley.edu', 'bmes.berkeley.edu', 'bmeta.berkeley.edu', 'bmj.berkeley.edu', 'bnhm.berkeley.edu', 'bnhmipt.berkeley.edu', 'bnhmwp.berkeley.edu', 'bodypeace.berkeley.edu', 'bolo.berkeley.edu', 'bonelab.berkeley.edu', 'boos.berkeley.edu', 'bootcamp.berkeley.edu', 'botanicalgarden.berkeley.edu', 'bowie.berkeley.edu', 'bpec.berkeley.edu', 'bpep.berkeley.edu', 'bpl.berkeley.edu', 'bpm.berkeley.edu', 'bppj.berkeley.edu', 'brain.berkeley.edu', 'brand.berkeley.edu', 'bravo.berkeley.edu', 'brdo.berkeley.edu', 'breakthroughprize.berkeley.edu', 'brie.berkeley.edu', 'brrc.berkeley.edu', 'bryolab.berkeley.edu', 'bsa.berkeley.edu', 'bscit.berkeley.edu', 'bse.berkeley.edu', 'bsil.berkeley.edu', 'bsim.berkeley.edu', 'bsj.berkeley.edu', 'bsn.berkeley.edu', 'bsp.berkeley.edu', 'buddhiststudies.berkeley.edu', 'budker.berkeley.edu', 'buj.berkeley.edu', 'bungelab.berkeley.edu', 'burawoy.berkeley.edu', 'busdev.berkeley.edu', 'businessanalytics.berkeley.edu', 'businessservices.berkeley.edu', 'busops.berkeley.edu', 'bustamante.berkeley.edu', 'bwc.berkeley.edu', 'cal-mr.berkeley.edu', 'calanswers.berkeley.edu', 'calband.berkeley.edu', 'calcentral.berkeley.edu', 'calday.berkeley.edu', 'caldragonboat.berkeley.edu', 'calfalcons.berkeley.edu', 'calfresh.berkeley.edu', 'calfund.berkeley.edu', 'callink.berkeley.edu', 'calmessages.berkeley.edu', 'calmoveout.berkeley.edu', 'calnerds.berkeley.edu', 'calnet.berkeley.edu', 'calnetad.berkeley.edu', 'calnetweb.berkeley.edu', 'calparents.berkeley.edu', 'calplanning.berkeley.edu', 'calso.berkeley.edu', 'calsol.berkeley.edu', 'calsolv.berkeley.edu', 'calspirit.berkeley.edu', 'calstudentstore.berkeley.edu', 'calswec.berkeley.edu', 'calteach.berkeley.edu', 'caltime.berkeley.edu', 'calttc.berkeley.edu', 'caltv.berkeley.edu', 'calviz.berkeley.edu', 'campaignidentity.berkeley.edu', 'campanile.berkeley.edu', 'campusclimate.berkeley.edu', 'campuspol.berkeley.edu', 'campuspol-new.berkeley.edu', 'campustours.berkeley.edu', 'canada.berkeley.edu', 'capitalstrategies.berkeley.edu', 'cara.berkeley.edu', 'care.berkeley.edu', 'career.berkeley.edu', 'casa.berkeley.edu', 'casn.berkeley.edu', 'casper.berkeley.edu', 'catalyst.berkeley.edu', 'catsip.berkeley.edu', 'cbc.berkeley.edu', 'cbe.berkeley.edu', 'cbt-dev.berkeley.edu', 'ccb.berkeley.edu', 'ccci.berkeley.edu', 'ccn.berkeley.edu', 'ccrm.berkeley.edu', 'ccwip.berkeley.edu', 'cdar.berkeley.edu', 'cdtr.berkeley.edu', 'ce.berkeley.edu', 'ceder.berkeley.edu', 'ceej.berkeley.edu', 'cega.berkeley.edu', 'cejce.berkeley.edu', 'cellscope.berkeley.edu', 'celtic.berkeley.edu', 'cep.berkeley.edu', 'ceparev.berkeley.edu', 'cer.berkeley.edu', 'cerch.berkeley.edu', 'cet.berkeley.edu', 'ceu.berkeley.edu', 'cfo.berkeley.edu', 'cfp.berkeley.edu', 'cghdde.berkeley.edu', 'cgi-lib.berkeley.edu', 'cgph.berkeley.edu', 'cgpsa.berkeley.edu', 'chai.berkeley.edu', 'chancellor.berkeley.edu', 'changemaker.berkeley.edu', 'charterhill.berkeley.edu', 'chembio.berkeley.edu', 'chemnet.berkeley.edu', 'choir.berkeley.edu', 'chowdhurycenter.berkeley.edu', 'cici.berkeley.edu', 'cil.berkeley.edu', 'cips.berkeley.edu', 'cir.berkeley.edu', 'circle.berkeley.edu', 'citiesandschools.berkeley.edu', 'citrincenter.berkeley.edu', 'cjc.berkeley.edu', 'cki.berkeley.edu', 'cla.berkeley.edu', 'clarklab.berkeley.edu', 'clasarchive.berkeley.edu', 'clausen.berkeley.edu', 'cle.berkeley.edu', 'cleanenergycampus.berkeley.edu', 'clear.berkeley.edu', 'climb.berkeley.edu', 'climbing.berkeley.edu', 'cmes.berkeley.edu', 'cmgg.berkeley.edu', 'cmr.berkeley.edu', 'cn.berkeley.edu', 'cnl.berkeley.edu', 'cnmat.berkeley.edu', 'coateslab.berkeley.edu', 'codebase.berkeley.edu', 'codesign.berkeley.edu', 'coeh.berkeley.edu', 'cogsci.berkeley.edu', 'cohen.berkeley.edu', 'colala.berkeley.edu', 'coli.berkeley.edu', 'collegium.berkeley.edu', 'combustion.berkeley.edu', 'commencement.berkeley.edu', 'compbio.berkeley.edu', 'complexity.berkeley.edu', 'compliance.berkeley.edu', 'complit.berkeley.edu', 'concretecanoe.berkeley.edu', 'conduct.berkeley.edu', 'consumer.berkeley.edu', 'consumerlaw.berkeley.edu', 'controller.berkeley.edu', 'coolclimate.berkeley.edu', 'corelab.berkeley.edu', 'coronavirus.berkeley.edu', 'cosmology.berkeley.edu', 'coursethreads.berkeley.edu', 'covidvis.berkeley.edu', 'cpd.berkeley.edu', 'cper.berkeley.edu', 'cphs.berkeley.edu', 'crc.berkeley.edu', 'crea.berkeley.edu', 'creative.berkeley.edu', 'creativelab.berkeley.edu', 'creeks.berkeley.edu', 'creutzig.berkeley.edu', 'crg.berkeley.edu', 'criticaltheory.berkeley.edu', 'crl.berkeley.edu', 'crlp.berkeley.edu', 'crnai.berkeley.edu', 'crommie.berkeley.edu', 'crowdfund.berkeley.edu', 'crsc.berkeley.edu', 'crws.berkeley.edu', 'cryoem.berkeley.edu', 'csa.berkeley.edu', 'csac.berkeley.edu', 'cscce.berkeley.edu', 'csf.berkeley.edu', 'csi.berkeley.edu', 'csillustrated.berkeley.edu', 'csls.berkeley.edu', 'csmentors.berkeley.edu', 'csml.berkeley.edu', 'csp.berkeley.edu', 'cssa.berkeley.edu', 'cssc.berkeley.edu', 'cssl.berkeley.edu', 'cssr.berkeley.edu', 'cstms.berkeley.edu', 'ctml.berkeley.edu', 'cto.berkeley.edu', 'ctp.berkeley.edu', 'ctsp.berkeley.edu', 'culcog.berkeley.edu', 'culturalanalytics.berkeley.edu', 'cybears.berkeley.edu', 'dac.berkeley.edu', 'dagrs.berkeley.edu', 'dameslab.berkeley.edu', 'dap.berkeley.edu', 'data.berkeley.edu', 'dataconnect.berkeley.edu', 'datadiversity.berkeley.edu', 'datahub.berkeley.edu', 'datasci.berkeley.edu', 'datastory.berkeley.edu', 'datax.berkeley.edu', 'davidcard.berkeley.edu', 'dcac.berkeley.edu', 'deanofstudents.berkeley.edu', 'debate.berkeley.edu', 'decal.berkeley.edu', 'decf.berkeley.edu', 'deepdrive.berkeley.edu', 'defi.berkeley.edu', 'demonstrate.berkeley.edu', 'denali.berkeley.edu', 'deptapps.berkeley.edu', 'design.berkeley.edu', 'designinnovation.berkeley.edu', 'designthinking.berkeley.edu', 'dheal.berkeley.edu', 'didl.berkeley.edu', 'dil.berkeley.edu', 'dining.berkeley.edu', 'disabilitylab.berkeley.edu', 'disasterlab.berkeley.edu', 'discovercal.berkeley.edu', 'discovery.berkeley.edu', 'diversity.berkeley.edu', 'dlab.berkeley.edu', 'dls.berkeley.edu', 'docs-research-it.berkeley.edu', 'docubase.berkeley.edu', 'drb.berkeley.edu', 'drubinbarneslab.berkeley.edu', 'dse.berkeley.edu', 'dsf.berkeley.edu', 'dsp.berkeley.edu', 'dueberlab.berkeley.edu', 'dutch.berkeley.edu', 'dynamics.berkeley.edu', 'ealc.berkeley.edu', 'eaop.berkeley.edu', 'earthquakes.berkeley.edu', 'eau.berkeley.edu', 'ecal.berkeley.edu', 'ece.berkeley.edu', 'ecoblock.berkeley.edu', 'econreview.berkeley.edu', 'ecosystems.berkeley.edu', 'edg.berkeley.edu', 'edge.berkeley.edu', 'edrl.berkeley.edu', 'ee.berkeley.edu', 'eeeseminar.berkeley.edu', 'eerlab.berkeley.edu', 'efmh.berkeley.edu', 'eftstudent.berkeley.edu', 'eggster.berkeley.edu', 'ehs.berkeley.edu', 'ejce.berkeley.edu', 'eleven.berkeley.edu', 'em-executive.berkeley.edu', 'emac.berkeley.edu', 'emeritiacademy.berkeley.edu', 'eml.berkeley.edu', 'emtlab.berkeley.edu', 'enlab.berkeley.edu', 'entrepreneurship.berkeley.edu', 'eop.berkeley.edu', 'epic.berkeley.edu', 'epicc.berkeley.edu', 'epiccvfe.berkeley.edu', 'eps.berkeley.edu', 'equestrian.berkeley.edu', 'ergo.berkeley.edu', 'esc.berkeley.edu', 'esignatures.berkeley.edu', 'esilab.berkeley.edu', 'eslibrary.berkeley.edu', 'essig.berkeley.edu', 'essigdb.berkeley.edu', 'ethics.berkeley.edu', 'ethnicstudies.berkeley.edu', 'ets.berkeley.edu', 'eua.berkeley.edu', 'eucenter.berkeley.edu', 'ev.berkeley.edu', 'evcp.berkeley.edu', 'eventservices.berkeley.edu', 'ewb.berkeley.edu', 'exec-ed.berkeley.edu', 'executive.berkeley.edu', 'eyecare.berkeley.edu', 'facilities.berkeley.edu', 'farid.berkeley.edu', 'fbf.berkeley.edu', 'fcba.berkeley.edu', 'fencing.berkeley.edu', 'fieldstations.berkeley.edu', 'figureskating.berkeley.edu', 'film.berkeley.edu', 'financialaid.berkeley.edu', 'finelab.berkeley.edu', 'firelab.berkeley.edu', 'fletchlab.berkeley.edu', 'float.berkeley.edu', 'flow.berkeley.edu', 'fly.berkeley.edu', 'forage.berkeley.edu', 'foresight.berkeley.edu', 'forestrycamp.berkeley.edu', 'forests.berkeley.edu', 'forum.berkeley.edu', 'fpf.berkeley.edu', 'frcp.berkeley.edu', 'freelinglab.berkeley.edu', 'french.berkeley.edu', 'frg.berkeley.edu', 'fsae.berkeley.edu', 'fungfellows.berkeley.edu', 'ga.berkeley.edu', 'gadgillab.berkeley.edu', 'gallery.berkeley.edu', 'gamedesign.berkeley.edu', 'gamescrafters.berkeley.edu', 'gardenshop.berkeley.edu', 'geneq.berkeley.edu', 'genetics.berkeley.edu', 'geography.berkeley.edu', 'geogweb.berkeley.edu', 'geomechanics.berkeley.edu', 'geomicrobiology.berkeley.edu', 'geotechnical.berkeley.edu', 'ggia.berkeley.edu', 'ggie.berkeley.edu', 'ggkbase.berkeley.edu', 'ggkbase-help.berkeley.edu', 'ggsc.berkeley.edu', 'gias.berkeley.edu', 'gif.berkeley.edu', 'gilbert.berkeley.edu', 'give.berkeley.edu', 'glasslab.berkeley.edu', 'glaunsingerlab.berkeley.edu', 'globaledge.berkeley.edu', 'globalengagement.berkeley.edu', 'globalscience.berkeley.edu', 'globalstudies.berkeley.edu', 'globe.berkeley.edu', 'goldberg.berkeley.edu', 'golubcollection.berkeley.edu', 'gpporgs.berkeley.edu', 'gradapp.berkeley.edu', 'graddashboard.berkeley.edu', 'gradlectures.berkeley.edu', 'graphics.berkeley.edu', 'grc.berkeley.edu', 'greenbuildings.berkeley.edu', 'growingroots.berkeley.edu', 'growthmarkets.berkeley.edu', 'gse.berkeley.edu', 'gsi.berkeley.edu', 'gsppi.berkeley.edu', 'gu.berkeley.edu', 'guide.berkeley.edu', 'guir.berkeley.edu', 'gwe.berkeley.edu', 'gws.berkeley.edu', 'haasatwork.berkeley.edu', 'haasinstitute.berkeley.edu', 'haasug.berkeley.edu', 'hallatscheklab.berkeley.edu', 'hart.berkeley.edu', 'harveysleeplab.berkeley.edu', 'hasegawa.berkeley.edu', 'hatespeech.berkeley.edu', 'hcg.berkeley.edu', 'hci.berkeley.edu', 'healthtech.berkeley.edu', 'healthycities.berkeley.edu', 'healthyworkplaces.berkeley.edu', 'herrlab.berkeley.edu', 'hes.berkeley.edu', 'hey.berkeley.edu', 'hia.berkeley.edu', 'hinshawlab.berkeley.edu', 'hiperlab.berkeley.edu', 'history.berkeley.edu', 'hku.berkeley.edu', 'hmap.berkeley.edu', 'holloway.berkeley.edu', 'holos.berkeley.edu', 'homecoming.berkeley.edu', 'hoofnagle.berkeley.edu', 'hope.berkeley.edu', 'housing.berkeley.edu', 'housingcomm.berkeley.edu', 'hpg.berkeley.edu', 'hplms.berkeley.edu', 'hr.berkeley.edu', 'hrc.berkeley.edu', 'hrweb.berkeley.edu', 'hssa.berkeley.edu', 'htf.berkeley.edu', 'hubbard.berkeley.edu', 'humanrights.berkeley.edu', 'humnetlab.berkeley.edu', 'hybrid-robotics.berkeley.edu', 'iacp.berkeley.edu', 'iande.berkeley.edu', 'ibdev.berkeley.edu', 'ibnbattuta.berkeley.edu', 'icbs.berkeley.edu', 'icelab.berkeley.edu', 'idealabs.berkeley.edu', 'idealabs-qa.berkeley.edu', 'ieas.berkeley.edu', 'iep.berkeley.edu', 'ies.berkeley.edu', 'igenspectrum.berkeley.edu', 'ihouse.berkeley.edu', 'iis.berkeley.edu', 'iise.berkeley.edu', 'iisecon.berkeley.edu', 'imaginarium.berkeley.edu', 'indiacenter.berkeley.edu', 'inferno.berkeley.edu', 'innova.berkeley.edu', 'innovate.berkeley.edu', 'innovateforhealth.berkeley.edu', 'innovationindex.berkeley.edu', 'innovators.berkeley.edu', 'interact.berkeley.edu', 'international.berkeley.edu', 'intervarsity.berkeley.edu', 'io.berkeley.edu', 'ions.berkeley.edu', 'ipira.berkeley.edu', 'ipsr.berkeley.edu', 'iranianstudies.berkeley.edu', 'irisresearch.berkeley.edu', 'ischoolonline.berkeley.edu', 'iseees.berkeley.edu', 'israelidance.berkeley.edu', 'iss-portal.berkeley.edu', 'issi.berkeley.edu', 'issp.berkeley.edu', 'ist.berkeley.edu', 'italian.berkeley.edu', 'italiansociety.berkeley.edu', 'itot.berkeley.edu', 'itslibrary.berkeley.edu', 'iu.berkeley.edu', 'ivri.berkeley.edu', 'ivrylab.berkeley.edu', 'jacobs.berkeley.edu', 'jacobsinstitute.berkeley.edu', 'japanese.berkeley.edu', 'jewishstudies.berkeley.edu', 'jhti.berkeley.edu', 'jmarshall.berkeley.edu', 'jobs.berkeley.edu', 'journalism.berkeley.edu', 'joynerlab.berkeley.edu', 'jrws.berkeley.edu', 'jsp-ls.berkeley.edu', 'kaf.berkeley.edu', 'kathleenryanlab.berkeley.edu', 'kavli.berkeley.edu', 'kavlicenter.berkeley.edu', 'kendo.berkeley.edu', 'kinglab.berkeley.edu', 'kumarlab.berkeley.edu', 'laborcenter.berkeley.edu', 'laborcenter-store.berkeley.edu', 'lagses.berkeley.edu', 'landlab.berkeley.edu', 'lange.berkeley.edu', 'launchpad.berkeley.edu', 'laya.berkeley.edu', 'lcdlab.berkeley.edu', 'lclab.berkeley.edu', 'lead.berkeley.edu', 'leaderstudio.berkeley.edu', 'legalstudies.berkeley.edu', 'lewislab.berkeley.edu', 'libproxy.berkeley.edu', 'life.berkeley.edu', 'light.berkeley.edu', 'lightsheet.berkeley.edu', 'lightweightcrew.berkeley.edu', 'linguistics.berkeley.edu', 'llp.berkeley.edu', 'logic.berkeley.edu', 'louie.berkeley.edu', 'loyal.berkeley.edu', 'lrc.berkeley.edu', 'ls.berkeley.edu', 'ls-advise.berkeley.edu', 'lsadvising.berkeley.edu', 'lsbe.berkeley.edu', 'lscr.berkeley.edu', 'lsec.berkeley.edu', 'lsfirstyear.berkeley.edu', 'lsmentors.berkeley.edu', 'lti.berkeley.edu', 'ltl.berkeley.edu', 'luclab.berkeley.edu', 'maboudianlab.berkeley.edu', 'mackcenter.berkeley.edu', 'macss.berkeley.edu', 'madelucchi.berkeley.edu', 'madlibbing.berkeley.edu', 'mailservices.berkeley.edu', 'make.berkeley.edu', 'mappingforej.berkeley.edu', 'mathcircle.berkeley.edu', 'matrix.berkeley.edu', 'mcah.berkeley.edu', 'mcbusa.berkeley.edu', 'mcc.berkeley.edu', 'mcguire.berkeley.edu', 'mckittrick.berkeley.edu', 'me.berkeley.edu', 'medieval.berkeley.edu', 'membrane.berkeley.edu', 'mentoringawards.berkeley.edu', 'mep.berkeley.edu', 'merchant.berkeley.edu', 'met.berkeley.edu', 'meta-algorithms.berkeley.edu', 'metadata.berkeley.edu', 'metrostudies.berkeley.edu', 'micro.berkeley.edu', 'microbiome.berkeley.edu', 'microfluidics.berkeley.edu', 'microkit.berkeley.edu', 'microlab.berkeley.edu', 'micronet.berkeley.edu', 'microscopy.berkeley.edu', 'middleawash.berkeley.edu', 'militzer.berkeley.edu', 'millerscholars.berkeley.edu', 'miltonrevealed.berkeley.edu', 'ml.berkeley.edu', 'mlo.berkeley.edu', 'moorea.berkeley.edu', 'moveme.berkeley.edu', 'mpg.berkeley.edu', 'mpsscholars.berkeley.edu', 'msc.berkeley.edu', 'mse.berkeley.edu', 'msea.berkeley.edu', 'msegsc.berkeley.edu', 'msol.berkeley.edu', 'msse.berkeley.edu', 'multicultural.berkeley.edu', 'mun.berkeley.edu', 'murthylab.berkeley.edu', 'musa.berkeley.edu', 'music.berkeley.edu', 'mvz.berkeley.edu', 'mvzarchives.berkeley.edu', 'mvzhandbook.berkeley.edu', 'mwhite.berkeley.edu', 'my.berkeley.edu', 'myapp.berkeley.edu', 'myexperience.berkeley.edu', 'myshake.berkeley.edu', 'nagpra.berkeley.edu', 'nano.berkeley.edu', 'nanolab.berkeley.edu', 'nanowires.berkeley.edu', 'naturalhistory.berkeley.edu', 'navb.berkeley.edu', 'navcal.berkeley.edu', 'nemeacenter.berkeley.edu', 'neuroecon.berkeley.edu', 'neurotech.berkeley.edu', 'nightsafety.berkeley.edu', 'nisee.berkeley.edu', 'niyogilab.berkeley.edu', 'nlp.berkeley.edu', 'noblegas.berkeley.edu', 'noteworthy.berkeley.edu', 'npwg.berkeley.edu', 'nrotc.berkeley.edu', 'nssc.berkeley.edu', 'nst.berkeley.edu', 'nuc.berkeley.edu', 'nuclearbootcamp.berkeley.edu', 'nucleardata.berkeley.edu', 'oa.berkeley.edu', 'observe.berkeley.edu', 'oconnell.berkeley.edu', 'oe.berkeley.edu', 'oem.berkeley.edu', 'ofew.berkeley.edu', 'olli.berkeley.edu', 'omlab.berkeley.edu', 'onlinelearning.berkeley.edu', 'onlinemph.berkeley.edu', 'onthesamepage.berkeley.edu', 'opa.berkeley.edu', 'open.berkeley.edu', 'openfresco.berkeley.edu', 'openlearn.berkeley.edu', 'openseesnavigator.berkeley.edu', 'ophd.berkeley.edu', 'optohub.berkeley.edu', 'oratory.berkeley.edu', 'orchestra.berkeley.edu', 'orensteinlab.berkeley.edu', 'orias.berkeley.edu', 'orientation.berkeley.edu', 'ouija.berkeley.edu', 'ourenvironment.berkeley.edu', 'pantry.berkeley.edu', 'paperwiki.berkeley.edu', 'parents.berkeley.edu', 'parks.berkeley.edu', 'path.berkeley.edu', 'pathways.berkeley.edu', 'pbk.berkeley.edu', 'pe.berkeley.edu', 'persson.berkeley.edu', 'pgec.berkeley.edu', 'pha.berkeley.edu', 'philosophy.berkeley.edu', 'phylogenomics.berkeley.edu', 'physics.berkeley.edu', 'pickering.berkeley.edu', 'pictureyourself.berkeley.edu', 'piep.berkeley.edu', 'pioneers.berkeley.edu', 'planningjobs.berkeley.edu', 'plantbiodiversity.berkeley.edu', 'planyourlegacy.berkeley.edu', 'plasticstreaty.berkeley.edu', 'pmhs.berkeley.edu', 'pointreyes.berkeley.edu', 'police.berkeley.edu', 'polisci.berkeley.edu', 'politicaleconomy.berkeley.edu', 'pong.berkeley.edu', 'portal.berkeley.edu', 'possibilitylab.berkeley.edu', 'postdoc.berkeley.edu', 'ppl.berkeley.edu', 'ppl-minor.berkeley.edu', 'precollege.berkeley.edu', 'property.berkeley.edu', 'pros.berkeley.edu', 'prototype.berkeley.edu', 'psichi.berkeley.edu', 'psychology.berkeley.edu', 'pt.berkeley.edu', 'pteridophytes.berkeley.edu', 'pts.berkeley.edu', 'publicaffairs.berkeley.edu', 'publicservice.berkeley.edu', 'publicsociology.berkeley.edu', 'puente.berkeley.edu', 'puzzle.berkeley.edu', 'pvidealab.berkeley.edu', 'quantumdevices.berkeley.edu', 'queer.berkeley.edu', 'quiparle.berkeley.edu', 'rac.berkeley.edu', 'radwatch.berkeley.edu', 'rael.berkeley.edu', 'ral.berkeley.edu', 'rallen.berkeley.edu', 'ram.berkeley.edu', 'rausser.berkeley.edu', 'rdi.berkeley.edu', 'reading.berkeley.edu', 'realestate.berkeley.edu', 'recalibrate.berkeley.edu', 'recwell.berkeley.edu', 'redwood.berkeley.edu', 'regionalservices.berkeley.edu', 'registrar.berkeley.edu', 'rems.berkeley.edu', 'research-it.berkeley.edu', 'researchcoi.berkeley.edu', 'researchdata.berkeley.edu', 'reshall.berkeley.edu', 'reslife.berkeley.edu', 'restrooms.berkeley.edu', 'retirement.berkeley.edu', 'reunions.berkeley.edu', 'reuse.berkeley.edu', 'revistanoj.berkeley.edu', 'rfs.berkeley.edu', 'rfs-env.berkeley.edu', 'rhetoric.berkeley.edu', 'rhoi.berkeley.edu', 'ric.berkeley.edu', 'rightcare.berkeley.edu', 'risc.berkeley.edu', 'risk-resilience.berkeley.edu', 'riskservices.berkeley.edu', 'rll.berkeley.edu', 'roar.berkeley.edu', 'rotations.berkeley.edu', 'rtl.berkeley.edu', 'saas.berkeley.edu', 'safetrec.berkeley.edu', 'sagehen.berkeley.edu', 'sailing.berkeley.edu', 'sait.berkeley.edu', 'sat.berkeley.edu', 'sathercenter.berkeley.edu', 'sca.berkeley.edu', 'scandinavian.berkeley.edu', 'scet.berkeley.edu', 'scgcs.berkeley.edu', 'scholar.berkeley.edu', 'scholarships.berkeley.edu', 'schutzius.berkeley.edu', 'scienceatcal.berkeley.edu', 'sciencepolicy.berkeley.edu', 'sciencespo.berkeley.edu', 'scor.berkeley.edu', 'scr.berkeley.edu', 'sda.berkeley.edu', 'secure-tickets.berkeley.edu', 'security.berkeley.edu', 'sedlakgroup.berkeley.edu', 'see.berkeley.edu', 'seedscholars.berkeley.edu', 'seismo.berkeley.edu', 'sensor.berkeley.edu', 'serc.berkeley.edu', 'sesame.berkeley.edu', 'seti.berkeley.edu', 'sexualviolence.berkeley.edu', 'shac.berkeley.edu', 'shaddenlab.berkeley.edu', 'shahidi.berkeley.edu', 'sharedservices.berkeley.edu', 'shareregion.berkeley.edu', 'sharerscholars.berkeley.edu', 'sherlock.berkeley.edu', 'shib.berkeley.edu', 'sifter.berkeley.edu', 'sih.berkeley.edu', 'siml.berkeley.edu', 'sinberbest.berkeley.edu', 'sinberise.berkeley.edu', 'sis.berkeley.edu', 'skydeck.berkeley.edu', 'slavic.berkeley.edu', 'slc.berkeley.edu', 'sls.berkeley.edu', 'sma.berkeley.edu', 'smart.berkeley.edu', 'smartcities.berkeley.edu', 'smc.berkeley.edu', 'smv.berkeley.edu', 'socialorigins.berkeley.edu', 'socialwelfare.berkeley.edu', 'socrates.berkeley.edu', 'socscibooks.berkeley.edu', 'software.berkeley.edu', 'sopi.berkeley.edu', 'southasia.berkeley.edu', 'spacecenter.berkeley.edu', 'spanish.berkeley.edu', 'spechtlab.berkeley.edu', 'spm.berkeley.edu', 'spo.berkeley.edu', 'sportsanalytics.berkeley.edu', 'spoton.berkeley.edu', 'sps.berkeley.edu', 'srl.berkeley.edu', 'sseas.berkeley.edu', 'sspc.berkeley.edu', 'stac.berkeley.edu', 'staffombuds.berkeley.edu', 'stafforg.berkeley.edu', 'star.berkeley.edu', 'stars.berkeley.edu', 'statistics.berkeley.edu', 'stc.berkeley.edu', 'strategicplan.berkeley.edu', 'streetslab.berkeley.edu', 'streetstory.berkeley.edu', 'strflab.berkeley.edu', 'studentaffairs.berkeley.edu', 'studentbilling.berkeley.edu', 'studentcentral.berkeley.edu', 'studentconduct.berkeley.edu', 'studentexperience.berkeley.edu', 'studentparents.berkeley.edu', 'studenttech.berkeley.edu', 'studentunion.berkeley.edu', 'studiogeo.berkeley.edu', 'studyabroad.berkeley.edu', 'summer.berkeley.edu', 'summeraid.berkeley.edu', 'sunsite.berkeley.edu', 'superfund.berkeley.edu', 'supernode.berkeley.edu', 'supplychain.berkeley.edu', 'supportal.berkeley.edu', 'survivorsupport.berkeley.edu', 'susa.berkeley.edu', 'sustainability.berkeley.edu', 'svsh.berkeley.edu', 'swarmlab.berkeley.edu', 'systems.berkeley.edu', 'tac.berkeley.edu', 'taflab.berkeley.edu', 'tagalab.berkeley.edu', 'taiko.berkeley.edu', 'takeaction.berkeley.edu', 'tannerlectures.berkeley.edu', 'taylorlab.berkeley.edu', 'tdps.berkeley.edu', 'teaching.berkeley.edu', 'teachinprison.berkeley.edu', 'techfund.berkeley.edu', 'technology.berkeley.edu', 'telcat.berkeley.edu', 'telemonitoring.berkeley.edu', 'terrylab.berkeley.edu', 'tgif.berkeley.edu', 'thglab.berkeley.edu', 'thriving.berkeley.edu', 'time.berkeley.edu', 'tims.berkeley.edu', 'townsendcenter.berkeley.edu', 'townsendlab.berkeley.edu', 'traders.berkeley.edu', 'transfers.berkeley.edu', 'transit.berkeley.edu', 'travel.berkeley.edu', 'tribaldata.berkeley.edu', 'tsaolab.berkeley.edu', 'tsrc.berkeley.edu', 'ttp.berkeley.edu', 'uav.berkeley.edu', 'ucbeast.berkeley.edu', 'ucbhssp.berkeley.edu', 'ucchoral.berkeley.edu', 'ucdata.berkeley.edu', 'ucfamilyedge.berkeley.edu', 'ucjepsarchives.berkeley.edu', 'uclinks.berkeley.edu', 'ucmparchives.berkeley.edu', 'ucmpdb.berkeley.edu', 'ucpath.berkeley.edu', 'ucpd.berkeley.edu', 'ucrc.berkeley.edu', 'uctech.berkeley.edu', 'udar.berkeley.edu', 'udl.berkeley.edu', 'ue.berkeley.edu', 'uga.berkeley.edu', 'ugastro.berkeley.edu', 'ugc.berkeley.edu', 'ugtcs.berkeley.edu', 'uhs.berkeley.edu', 'ulab.berkeley.edu', 'undocu.berkeley.edu', 'undsci.berkeley.edu', 'universityvillage.berkeley.edu', 'unmanned.berkeley.edu', 'upe.berkeley.edu', 'upp.berkeley.edu', 'urapprojects.berkeley.edu', 'urbanpolicy.berkeley.edu', 'urec.berkeley.edu', 'vagabond.berkeley.edu', 'vancelab.berkeley.edu', 'vca.berkeley.edu', 'vcaf.berkeley.edu', 'vcastrategicplan.berkeley.edu', 'vcg.berkeley.edu', 'vcue.berkeley.edu', 'veteran.berkeley.edu', 'vis.berkeley.edu', 'vision.berkeley.edu', 'visioninstitute.berkeley.edu', 'visit.berkeley.edu', 'visitors.berkeley.edu', 'vivecenter.berkeley.edu', 'voices.berkeley.edu', 'vpap.berkeley.edu', 'vpf.berkeley.edu', 'vsa.berkeley.edu', 'vspa.berkeley.edu', 'vtm.berkeley.edu', 'wakelab.berkeley.edu', 'wanglab.berkeley.edu', 'warnme.berkeley.edu', 'waterportal.berkeley.edu', 'web.berkeley.edu', 'webaccess.berkeley.edu', 'webcast.berkeley.edu', 'weblogo.berkeley.edu', 'welcomengineer.berkeley.edu', 'wellnessfund.berkeley.edu', 'wheelercolumn.berkeley.edu', 'whitneylab.berkeley.edu', 'wids.berkeley.edu', 'wildermuthlab.berkeley.edu', 'wildlife.berkeley.edu', 'wildsoetlab.berkeley.edu', 'wim.berkeley.edu', 'wireless.berkeley.edu', 'wise.berkeley.edu', 'wise-research.berkeley.edu', 'wla.berkeley.edu', 'womensstudies.berkeley.edu', 'wordseer.berkeley.edu', 'wordsoundlife.berkeley.edu', 'writing.berkeley.edu', 'xcelerator.berkeley.edu', 'xe.berkeley.edu', 'xlab.berkeley.edu', 'xr.berkeley.edu', 'xrlab.berkeley.edu', 'xugroup.berkeley.edu', 'y-plan.berkeley.edu', 'yardischolars.berkeley.edu', 'youngamericans.berkeley.edu', 'yparhub.berkeley.edu', 'zhoulab.berkeley.edu', 'administration.berkeley.edu', 'africanalumni.berkeley.edu', 'agroecology.berkeley.edu', 'amerindo.berkeley.edu', 'apasd.berkeley.edu', 'apbears.berkeley.edu', 'astrobiology.berkeley.edu', 'atkins.berkeley.edu', 'badminton.berkeley.edu', 'ballroom.berkeley.edu', 'basicscience.berkeley.edu', 'bateuplab.berkeley.edu', 'bbrg.berkeley.edu', 'bc.berkeley.edu', 'bcht.berkeley.edu', 'bcsm.berkeley.edu', 'bdd-data.berkeley.edu', 'BEARcenter.Berkeley.EDU', 'beehive.berkeley.edu', 'behl.berkeley.edu', 'bigcb.berkeley.edu', 'bioregion.berkeley.edu', 'biowiki.berkeley.edu', 'bishoplab.berkeley.edu', 'bmt.berkeley.edu', 'boaa.berkeley.edu', 'bpp.berkeley.edu', 'bridgeyear.berkeley.edu', 'budget.berkeley.edu', 'builders.berkeley.edu', 'bwlp.berkeley.edu', 'calbandalumni.berkeley.edu', 'calbug.berkeley.edu', 'calfutureforum.berkeley.edu', 'calfutures.berkeley.edu', 'calgroups.berkeley.edu', 'calm.berkeley.edu', 'calorigami.berkeley.edu', 'caltimeprod.berkeley.edu', 'cases.berkeley.edu', 'ccdocs.berkeley.edu', 'cdm.berkeley.edu', 'cheshire.berkeley.edu', 'civo.berkeley.edu', 'cmt.berkeley.edu', 'codescoop.berkeley.edu', 'coefunding.berkeley.edu', 'columbia.berkeley.edu', 'conboylab.berkeley.edu', 'cone.berkeley.edu', 'coursecapture.berkeley.edu', 'csad.berkeley.edu', 'daylight.berkeley.edu', 'dd.berkeley.edu', 'dec.berkeley.edu', 'despolab.berkeley.edu', 'dewa.berkeley.edu', 'didaskalia.berkeley.edu', 'discoverourmodel.berkeley.edu', 'dpe.berkeley.edu', 'dsrp.berkeley.edu', 'dualdegree.berkeley.edu', 'earc.berkeley.edu', 'edens.berkeley.edu', 'emergencyloans.berkeley.edu', 'emlab.berkeley.edu', 'enabletech.berkeley.edu', 'endo.berkeley.edu', 'eor.berkeley.edu', 'ethicscompliance.berkeley.edu', 'experiments.berkeley.edu', 'family.berkeley.edu', 'fipe.berkeley.edu', 'fischerlab.berkeley.edu', 'flamenco.berkeley.edu', 'founderspledge.berkeley.edu', 'garcialab.berkeley.edu', 'genderlawjustice.berkeley.edu', 'github.berkeley.edu', 'globalhealth.berkeley.edu', 'gmb.berkeley.edu', 'grln.berkeley.edu', 'highorder.berkeley.edu', 'ieee.berkeley.edu', 'igem.berkeley.edu', 'inauguration.berkeley.edu', 'incentiveawards.berkeley.edu', 'instar.berkeley.edu', 'ischoolpledge.berkeley.edu', 'issues.berkeley.edu', 'jamesjoyce.berkeley.edu', 'kammen.berkeley.edu', 'learn.berkeley.edu', 'leep.berkeley.edu', 'lip.berkeley.edu', 'lishkolab.berkeley.edu', 'lma.berkeley.edu', 'lumiere.berkeley.edu', 'melc.berkeley.edu', 'mensoctet.berkeley.edu', 'mercuryweb.berkeley.edu', 'millslab.berkeley.edu', 'mycrobes.berkeley.edu', 'myvoice.berkeley.edu', 'nanogeoscience.berkeley.edu', 'nasd.berkeley.edu', 'ncl.berkeley.edu', 'neurograd.berkeley.edu', 'nucscholar.berkeley.edu', 'obrien.berkeley.edu', 'olac.berkeley.edu', 'ombudsforstaff.berkeley.edu', 'osfood.berkeley.edu', 'outreach.berkeley.edu', 'partysafe.berkeley.edu', 'pearl.berkeley.edu', 'petersburg.berkeley.edu', 'phoenix.berkeley.edu', 'pi.berkeley.edu', 'plevin.berkeley.edu', 'plextech.berkeley.edu', 'privacy.berkeley.edu', 'procurement.berkeley.edu', 'psa.berkeley.edu', 'psychblog.berkeley.edu', 'ptop.berkeley.edu', 'qcb.berkeley.edu', 'qnl.berkeley.edu', 'rascl.berkeley.edu', 'rcme.berkeley.edu', 'rdm.berkeley.edu', 'recsports.berkeley.edu', 'reddie.berkeley.edu', 'reservemapper.berkeley.edu', 'risecamp.berkeley.edu', 'riverlab.berkeley.edu', 'ros.berkeley.edu', 'rpgp.berkeley.edu', 'russian.berkeley.edu', 'sage-bcgc.berkeley.edu', 'saservices.berkeley.edu', 'scf.berkeley.edu', 'schorlab.berkeley.edu', 'share.berkeley.edu', 'shelton.berkeley.edu', 'shift.berkeley.edu', 'sisproject.berkeley.edu', 'slidespecs.berkeley.edu', 'slugs.berkeley.edu', 'software-central.berkeley.edu', 'steelbridge.berkeley.edu', 'stepbystep.berkeley.edu', 'stpetersburg.berkeley.edu', 'strawberrycreek.berkeley.edu', 'studentwellbeing.berkeley.edu', 'summerfest.berkeley.edu', 'swe.berkeley.edu', 'teleactor.berkeley.edu', 'theunissen.berkeley.edu', 'traffic.berkeley.edu', 'traxlerlab.berkeley.edu', 'tsab.berkeley.edu', 'ucjazz.berkeley.edu', 'upzoning.berkeley.edu', 'uweb.berkeley.edu', 'walkerlab.berkeley.edu', 'webnet.berkeley.edu', 'webtango.berkeley.edu', 'wisdomcafe.berkeley.edu', 'xcf.berkeley.edu', 'yaghi.berkeley.edu', 'yearbook.berkeley.edu', 'youngalumni.berkeley.edu', 'zebra.berkeley.edu', 'actuary.berkeley.edu', 'aiche.berkeley.edu', 'askoski.berkeley.edu', 'asrg.berkeley.edu', 'bbd.berkeley.edu', 'bfx.berkeley.edu', 'bgc.berkeley.edu', 'bioehs.berkeley.edu', 'biosearch.berkeley.edu', 'bmap.berkeley.edu', 'caauth.berkeley.edu', 'caldining.berkeley.edu', 'campuslife.berkeley.edu', 'careercompass.berkeley.edu', 'ceg.berkeley.edu', 'cfr.berkeley.edu', 'chemecar.berkeley.edu', 'chemhistory.berkeley.edu', 'cleanweb.berkeley.edu', 'compbiochem.berkeley.edu', 'connected.berkeley.edu', 'cpinfo.berkeley.edu', 'crec.berkeley.edu', 'cross-currents.berkeley.edu', 'crwsarchive.berkeley.edu', 'csge.berkeley.edu', 'cube.berkeley.edu', 'decadence.berkeley.edu', 'design-nano.berkeley.edu', 'developer.berkeley.edu', 'digitalhumanities.berkeley.edu', 'dna.berkeley.edu', 'ebill.berkeley.edu', 'eigentaste.berkeley.edu', 'emergency.berkeley.edu', 'esw.berkeley.edu', 'exchange.berkeley.edu', 'feap.berkeley.edu', 'forestry.berkeley.edu', 'freespeech.berkeley.edu', 'fsm.berkeley.edu', 'fst.berkeley.edu', 'globalinstitute.berkeley.edu', 'hsi.berkeley.edu', 'igslibrary.berkeley.edu', 'innox.berkeley.edu', 'kante.berkeley.edu', 'kas.berkeley.edu', 'leelab.berkeley.edu', 'logic-library.berkeley.edu', 'lrdp.berkeley.edu', 'mdp.berkeley.edu', 'mellonmays.berkeley.edu', 'migration.berkeley.edu', 'msp.berkeley.edu', 'nanomechanics.berkeley.edu', 'nspo.berkeley.edu', 'openpapr.berkeley.edu', 'pasae.berkeley.edu', 'pass.berkeley.edu', 'poker.berkeley.edu', 'publicsafety.berkeley.edu', 'ryanlab.berkeley.edu', 'sa.berkeley.edu', 'safetycounts.berkeley.edu', 'servicenow.berkeley.edu', 'sexualassault.berkeley.edu', 'shib-test.berkeley.edu', 'socialwork.berkeley.edu', 'ssall.berkeley.edu', 'startups.berkeley.edu', 'stemcelltraining.berkeley.edu', 'strfpak.berkeley.edu', 'students.berkeley.edu', 'surfacewaves.berkeley.edu', 'svshadvisor.berkeley.edu', 'swps.berkeley.edu', 'ucbsurveys.berkeley.edu', 'ucbvax.berkeley.edu', 'ucmc.berkeley.edu', 'vpasp.berkeley.edu', 'vpsafp.berkeley.edu', 'vspa-gateway.berkeley.edu', 'achieveform.berkeley.edu', 'aeconnect.berkeley.edu', 'airportdesign.berkeley.edu', 'banfieldlab.berkeley.edu', 'bcsa.berkeley.edu', 'bev.berkeley.edu', 'biokeys.berkeley.edu', 'bitn.berkeley.edu', 'blumcenter-qa.berkeley.edu', 'calperfs.berkeley.edu', 'cases-kfas.berkeley.edu', 'ccac.berkeley.edu', 'cerc-wet.berkeley.edu', 'clam.berkeley.edu', 'delta.berkeley.edu', 'digitallearning.berkeley.edu', 'dsptrio.berkeley.edu', 'ecoreader.berkeley.edu', 'em-lab.berkeley.edu', 'entrepreneurs.berkeley.edu', 'hockemeyerlab.berkeley.edu', 'hspa.berkeley.edu', 'ite.berkeley.edu', 'jkweb.berkeley.edu', 'macaulaylab.berkeley.edu', 'mycalnet.berkeley.edu', 'ombo.berkeley.edu', 'palmerlab.berkeley.edu', 'powerandenergy.berkeley.edu', 'principals.berkeley.edu', 'prometheus.berkeley.edu', 'python.berkeley.edu', 'reports-cega.berkeley.edu', 'riskcenter.berkeley.edu', 'scholarship.berkeley.edu', 'sekhon.berkeley.edu', 'sgsa.berkeley.edu', 'ssbc.berkeley.edu', 'studentgiving.berkeley.edu', 'studentlegalclinic.berkeley.edu', 'summerbridge.berkeley.edu', 'systemstatus.berkeley.edu', 'telecom.berkeley.edu', 'toxsa.berkeley.edu', 'ucconnect.berkeley.edu', 'uvrec.berkeley.edu', 'webtemplate.berkeley.edu', 'eecs.berkeley.edu', 'ieor.berkeley.edu', 'www.law.berkeley.edu', 'news.berkeley.edu', 'grad.berkeley.edu', 'alumni.berkeley.edu', 'www.ocf.berkeley.edu', 'math.berkeley.edu', 'engineering.berkeley.edu', 'research.berkeley.edu', 'kalx.berkeley.edu', 'ced.berkeley.edu', 'mcb.berkeley.edu', 'arthistory.berkeley.edu', 'ib.berkeley.edu', 'english.berkeley.edu', 'cs.berkeley.edu', 'neuroscience.berkeley.edu', 'chemistry.berkeley.edu', 'german.berkeley.edu', 'sociology.berkeley.edu', 'astro.berkeley.edu', 'extension.berkeley.edu', 'publichealth.berkeley.edu', 'lx.berkeley.edu', 'nuc.berkeley.edu', 'ethnicstudies.berkeley.edu', 'statistics.berkeley.edu', 'rhetoric.berkeley.edu', 'www.econ.berkeley.edu', 'ce.berkeley.edu', 'philosophy.berkeley.edu', 'physics.berkeley.edu', 'bioeng.berkeley.edu', 'polisci.berkeley.edu', 'journalism.berkeley.edu', 'ls.berkeley.edu', 'psychology.berkeley.edu', 'cmr.berkeley.edu', 'africam.berkeley.edu', 'uhs.berkeley.edu', 'artstudio.berkeley.edu', 'scholarships.berkeley.edu', 'guide.berkeley.edu', 'french.berkeley.edu', 'scandinavian.berkeley.edu', 'rtl.berkeley.edu', 'me.berkeley.edu', 'mse.berkeley.edu', ]

class CourseSpider(CrawlSpider):
    """A spider to crawl the Questrom course site and extract course urls

    Args:
        CrawlSpider: A spider that crawls a website and extracts information
    """
    custom_settings = {
        'DEPTH_LIMIT': 5,
        # 'DEPTH_PRIORITY': 1,
        'DEPTH_STATS_VERBOSE': True,
        'DOWNLOADER_STATS': True,
        'URLLENGTH_LIMIT': 1000,
        'DOWNLOAD_MAXSIZE': 10737418,
        # 'DOMAIN_PAGE_LIMIT': 1,
        'CLOSESPIDER_PAGECOUNT': 600,
        # 'LOG_LEVEL': 'DEBUG',
        # 'LOG_FILE': 'log.log',
        # 'TELNETCONSOLE_ENABLED': True,
        'DNS_TIMEOUT': 10,
        'DOWNLOAD_TIMEOUT': 10,
    }

    def __init__(self, *args, **kwargs):
        self.name = kwargs.get('name', "mycrawler")
        self.output_directory = kwargs.get('output_directory', "/Users/jonahkatz/Desktop/BU_Chatbot/new_webpages2")
        self.allowed_domains = kwargs.get('allowed_domains', [])
        self.start_urls = kwargs.get('start_urls', [])
        self.rules = (
            Rule(LinkExtractor(allow=kwargs.get('allow_rules', []), deny=kwargs.get('deny_rules', [])),
                 callback="parse_course", follow=True),
        )
        super(CourseSpider, self).__init__(*args, **kwargs)
        self.scraped_data = {}

    def parse_course(self, response):
        """Parse the course page and extract the course url

        Args:
            response: The response from the course page

        Returns:
            None
        """
        if len(response.url) < 250:
            if self.scraped_data.get(response.url) is None:
                self.scraped_data[response.url] = response.text

    def closed(self, reason):
        """Called when the spider is closed

        Args:
            reason: The reason the spider was closed

        Returns:
            None
        """
        # Check if the directory exists. If it does, remove it
        if os.path.exists(self.output_directory):
            shutil.rmtree(self.output_directory)

        # Create directory if it doesn't exist
        os.makedirs(self.output_directory, exist_ok=True)

        # Iterate over URLs and their corresponding content in the dictionary
        for url, content in self.scraped_data.items():
            # Replace slashes with underscores in the URL to create a valid filename
            file_name = url.replace("/", "_")
            file_name = file_name.replace("?wantsMobile=true", "")
            file_path = os.path.join(self.output_directory, file_name)

            # Write the HTML content to the file
            if not os.path.exists(file_path):
                with open(file_path, 'w', encoding='utf-8') as f:
                    f.write(content)

def start_crawler(name, allowed_domains, start_urls, allow_rules, deny_rules, output_directory):
    """Start the crawler process

    Args:
        name: The name of the crawler
        allowed_domains: The allowed domains for the crawler
        start_urls: The start urls for the crawler
        allow_rules: The allow rules for the crawler
        deny_rules: The deny rules for the crawler
        output_directory: The output directory for the crawler

    Returns:
        None
    """
    process = CrawlerProcess(get_project_settings())
    process.crawl(CourseSpider, name=name, allowed_domains=allowed_domains, start_urls=start_urls,
                  allow_rules=allow_rules, deny_rules=deny_rules, output_directory=output_directory)
    process.start()


def run_crawler(name, allowed_domains, start_urls, allow_rules, deny_rules, output_directory):
    """Run the crawler and place the output in the output directory

    Args:
        name: The name of the crawler
        allowed_domains: The allowed domains for the crawler
        start_urls: The start urls for the crawler
        allow_rules: The allow rules for the crawler
        deny_rules: The deny rules for the crawler
        output_directory: The output directory for the crawler

    Returns:
        None
    """
    p = multiprocessing.Process(target=start_crawler, args=(name, allowed_domains, start_urls, allow_rules, deny_rules, output_directory))
    p.start()
    p.join()


if __name__ == '__main__':
    output_directory = "/Users/georgeflint/Desktop/berkeley_crawler_data"
    name = "mycrawler"
    allowed_domains = ['www.lib.berkeley.edu']
    # start_urls = ["https://www.berkeley.edu/"]
    # about/", "https://www.berkeley.edu/admissions/", "https://www.berkeley.edu/academics/", "https://www.berkeley.edu/research/", "https://www.berkeley.edu/campus-life/", "https://www.berkeley.edu/campus-life/housing-dining/", "https://diversity.berkeley.edu/", "https://summer.berkeley.edu/", "https://visit.berkeley.edu/", "https://grad.berkeley.edu/", "https://registrar.berkeley.edu/", "classes.berkeley.edu", "grad.berkeley.edu", "research.berkeley.edu", "haas.berkeley.edu"
    allow_rules = []
    csv_file_path = './subdomains/subdomain_counts_filtered.csv'  # Adjust path as needed
    # allowed_domains, deny_rules = process_domains_from_csv(csv_file_path) 
    # blocked_subdomains +   
    # deny_rules = ['news','search','%','&','publications','topics','people','faculty','login','press','talk','article','item','media','createdby','kaltura.berkeley.edu','blog','weekly-opportunities','content','events','event','label','products','api','node','projects','project','giving-day','term','download','downloads','page','pages','tag','search','id','q','spotlight'] + [f'{str(year)}' for year in range(2024, 1923, -1)] + [f'/{str(year)}' for year in range(2024, 1923, -1)]
    deny_rules = ['digicoll.lib.berkeley.edu', 'auth.berkeley.edu']

    allowed_domains = set(allowed_domains)

    # number_of_domains = len(allowed_domains)

    for subdomain in allowed_domains:
        start_url = f'https://{subdomain}'
        start_urls = [start_url]
        run_crawler(name, [subdomain], start_urls, allow_rules, deny_rules, f'{output_directory}/{subdomain}')